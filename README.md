![foodgram workflow](https://github.com/voevoda173/foodgram-project-react/actions/workflows/foodgram_workflow.yml/badge.svg)

[![Python](https://img.shields.io/badge/-Python-464646?style=flat-square&logo=Python)](https://www.python.org/)
[![Django](https://img.shields.io/badge/-Django-464646?style=flat-square&logo=Django)](https://www.djangoproject.com/)
[![Django REST Framework](https://img.shields.io/badge/-Django%20REST%20Framework-464646?style=flat-square&logo=Django%20REST%20Framework)](https://www.django-rest-framework.org/)
[![PostgreSQL](https://img.shields.io/badge/-PostgreSQL-464646?style=flat-square&logo=PostgreSQL)](https://www.postgresql.org/)
[![Nginx](https://img.shields.io/badge/-NGINX-464646?style=flat-square&logo=NGINX)](https://nginx.org/ru/)
[![gunicorn](https://img.shields.io/badge/-gunicorn-464646?style=flat-square&logo=gunicorn)](https://gunicorn.org/)
[![docker](https://img.shields.io/badge/-Docker-464646?style=flat-square&logo=docker)](https://www.docker.com/)
[![GitHub%20Actions](https://img.shields.io/badge/-GitHub%20Actions-464646?style=flat-square&logo=GitHub%20actions)](https://github.com/features/actions)
[![Yandex.Cloud](https://img.shields.io/badge/-Yandex.Cloud-464646?style=flat-square&logo=Yandex.Cloud)](https://cloud.yandex.ru/)

Проект запущен и доступен по [адресу](http://51.250.31.146/recipes)
### Доступ к панели администратора

Имя пользователя: admin
Пароль: admin
### FoodGram
Продуктовый помощник. Публикуйте рецепты, подписывайтесь на публикации других пользователей, добавляйте понравившиеся рецепты в список «Избранное», а также, перед походом в магазин, сможете скачачть список продуктов для приготовления одного или нескольких выбранных блюд.

### Техническое описание. ###

Проект **Foodgram** является полноценным **«Продуктовым помощником»**, благодаря которому пользователи могут публиковать рецепты, добавлять чужие рецепты в избранное и подписываться на публикации других авторов. Сервис **«Список покупок»** позволит пользователям создавать список продуктов, которые нужно купить для приготовления выбранных блюд.

В проекте реализован полноценный **«API»** сервис. На этом сервисе пользователи смогут публиковать рецепты, подписываться на публикации других пользователей, добавлять понравившиеся рецепты в список **«Избранное»**, а перед походом в магазин скачивать сводный список продуктов, необходимых для приготовления одного или нескольких выбранных блюд.

### Пользовательские роли ###

  - Неавторизованные пользователи могут:
     - создать аккаунт;
     - просматривать рецепты на главной странице;
     - просматривать отдельные страницы рецептов;
     - просматривать страницы пользователей;
     - фильтровать рецепты по тегам.


  - Авторизованные пользователи могут:
     - входить в систему под своим логином и паролем;
     - выходить из системы (разлогиниваться);
     - менять свой пароль;
     - создавать/редактировать/удалять собственные рецепты;
     - просматривать рецепты на главной;  
     - просматривать страницы пользователей;
     - просматривать отдельные страницы рецептов;
     - фильтровать рецепты по тегам;
     - работать с персональным списком избранного: добавлять в него рецепты или удалять их, просматривать свою страницу избранных рецептов;
     - работать с персональным списком покупок: добавлять/удалять **любые** рецепты, выгружать файл с количеством необходимых ингридиентов для рецептов из списка покупок;
     - подписываться на публикации авторов рецептов и отменять подписку, просматривать свою страницу подписок.


  - Администратор может:
     - изменять пароль любого пользователя;
     - создавать/блокировать/удалять аккаунты пользователей;
     - редактировать/удалять **любые** рецепты;
     - добавлять/удалять/редактировать ингредиенты;
     - добавлять/удалять/редактировать теги.


***

### Алгоритм регистрации пользователей ###

1. Для добавления нового пользователя нужно отправить POST-запрос на эндпоинт /api/users/ с параметрами:
    - email;
    - username;
    - first_name;
    - last_name;
    - password.


2. Далее пользователь отправляет POST-запрос на эндпоинт /api/auth/token/login/ с параметрами:
    - password;
    - email.

В результате пользователь получает токен и может работать с API проекта, отправляя этот токен с каждым запросом.

***

### Шаблон наполнения env-файла ###


1. **DB_ENGINE=django.db.backends.postgresq**l - указываем, что работаем с postgresql.
2. **DB_NAME=postgres** - имя базы данных.
3. **POSTGRES_USER=postgres** - логин для подключения к базе данных.
4. **POSTGRES_PASSWORD=postgre** - пароль для подключения к БД (установите свой).
5. **DB_HOST=db** - название сервиса (контейнера).
6. **DB_PORT=5432** - порт для подключения к БД.

***

### Запуск проекта ###

### Склонируйте репозиторий
```
git clone https://github.com/voevoda173/foodgram-project-react
```

### Описание команд для запуска приложения в контейнерах ###

1. Перейдите в директорию **infra**, в которой распложен файл **docker-compose.yaml**:
```bash
cd infra/
```

2. Проверьте, что файл **docker-compose.yaml** находится в папке:
```bash
ls
```
```bash
docker-compose.yaml     nginx.conf
```
3. Запустите **docker-compose** командой:

```bash
docker-compose up -d
```

***


### Команды для заполнения базы данными. ###


Выполните 

```bash
docker ps 
```

и скопируйте ID контейнера с бэкендом.

Войдите внутрь контейнера

```bash
docker exec -it <ID контейнера> bash
```

и выполните следущие команды:

```bash
python manage.py migrate
```

```bash
python manage.py collectstatic
```

```bash
python manage.py createsuperuser
```

и далее создайте суперпользователя

Для заполнения базы данных ингредиентов
выполните команду

```bash
python manage.py load_db
```

## Автор проекта
- [Алексей Воеводин](https://github.com/voevoda173)